# MEDICAL

- type: entity
  id: CMMedilinkSupplyPort
  name: medilink supply port
  description: A complex network of pipes and machinery, linking to large storage systems below the deck. Medical vendors linked to this port will be able to infinitely restock supplies.
  placement:
    mode: SnapgridCenter
  components:
  - type: Transform
    anchored: true
  - type: Sprite
    sprite: _RMC14/Structures/Machines/Medical/medilink.rsi
    state: medlink_green_clamped # TODO RMC14 change states dynamically
    drawdepth: FloorObjects
  - type: CMMedicalSupplyLink


- type: entity
  parent: ColMarTechBaseAnchorable
  id: CMVendorMedicalAllAccess
  name: We-Ya-Med Plus
  description: Medical pharmaceutical dispenser. Provided by We-Ya Pharmaceuticals Division(TM).
  suffix: All Access
  components:
  - type: Sprite
    sprite: _RMC14/Structures/Machines/VendingMachines/med.rsi
    layers:
    - state: "off"
    - state: "normal-unshaded"
  - type: CMSolutionRefiller
    randomizeReagentsPlanetside: true
    current: 600
    max: 600
    recharge: 125 # TODO RMC14 auto-restock items as well if round is >= 20 minutes in
    rechargeCooldown: 4
    reagents:
    - CMBicaridine
    - CMKelotane
    - CMDylovene
    - CMDexalin
    - CMDexalinPlus
    - CMTricordrazine
    - CMEpinephrine
    - CMInaprovaline
#    - CMOxycodone # TODO RMC14
#    - CMTramadol # TODO RMC14
#    - CMPeridaxon # TODO RMC14
    whitelist:
      components:
      - Hypospray
      - Vial
      tags:
      - Bottle
  - type: CMAutomatedVendor # TODO RMC14 different ui style
    hackable: true
    randomUnstockAmount: -1 # -1 is between 1 and the original amount
    randomEmptyChance: 0.25 # 25% chance
    sections:
    - name: Field supplies
      entries:
      - id: CMBurnKit10
        amount: 6
      - id: CMTraumaKit10
        amount: 6
      - id: CMOintment10
      - id: CMGauze10
#      - id: CMSplints10 # TODO RMC14
#        amount: 6
    - name: Autoinjectors
      entries:
      - id: CMBicaridineAutoInjector
      - id: CMDexalinPlusAutoInjector
      - id: CMEpinephrineAutoInjector
      - id: CMInaprovalineAutoInjector
      - id: CMKelotaneAutoInjector
#      - id: CMOxycodoneAutoinjector # TODO RMC14
#        amount: 3
#      - id: CMTramadolAutoinjector # TODO RMC14
#        amount: 3
      - id: CMTricordrazineAutoInjector
    - name: Liquid bottles
      entries:
      - id: CMBottleBicaridine
      - id: CMBottleDylovene
      - id: CMBottleDexalin
      - id: CMBottleInaprovaline
      - id: CMBottleKelotane
#      - id: CMBottleOxycodone # TODO RMC14
#        amount: 3
#      - id: CMBottlePeridaxon # TODO RMC14
#        amount: 3
#      - id: CMBottleTramadol # TODO RMC14
#        amount: 3
    - name: Pill bottles
      entries:
      - id: CMPillCanisterBicaridine
      - id: CMPillCanisterDexalin
      - id: CMPillCanisterDylovene
      - id: CMPillCanisterInaprovaline
      - id: CMPillCanisterKelotane
#      - id: CMPillCanisterPeridaxon # TODO RMC14
#        amount: 2
#      - id: CMPillCanisterTramadol # TODO RMC14
#        amount: 2
    - name: Medical utilities
      entries:
      - id: CMDefibrillator
      - id: CMSurgicalLine
      - id: CMSynthGraft
      - id: CMHyposprayFilledTricord
      - id: CMHealthAnalyzer
      - id: CMBeltMedical
      - id: RMCGlassesMedicalHUDGlasses
      - id: CMStasisBagFolded
      - id: CMSyringe

- type: entity
  parent: CMVendorMedicalAllAccess
  id: CMVendorMedical
  suffix: ""
  components:
  - type: AccessReader
    access: [["CMAccessMedical"]]

- type: entity
  parent: CMVendorMedical
  id: CMVendorChemistry
  name: We-Ya-Chem Plus
  description: Medical chemistry dispenser. Provided by We-Ya Pharmaceuticals Division(TM).
  components:
  - type: Sprite
    sprite: _RMC14/Structures/Machines/VendingMachines/chem.rsi
    layers:
    - state: "off"
    - state: "normal-unshaded"
  - type: AccessReader
    access: [["CMAccessChemistry"]]
  - type: CMSolutionRefiller
    current: 1200
    max: 1200
    whitelist:
      tags:
      - Bottle
  - type: CMAutomatedVendor # TODO RMC14 different ui style
    sections:
    - name: Liquid bottles
      entries:
      - id: CMBottleBicaridine
      - id: CMBottleDylovene
      - id: CMBottleDexalin
      - id: CMBottleInaprovaline
      - id: CMBottleKelotane
    #      - id: CMBottleOxycodone # TODO RMC14
    #        amount: 6
    #      - id: CMBottlePeridaxon # TODO RMC14
    #        amount: 6
    #      - id: CMBottleTramadol # TODO RMC14
    #        amount: 6
    - name: Miscellaneous
      entries:
      - id: CMBeaker
        name: Beaker (60 units)
      - id: CMBeakerLarge
        name: Beaker, Large (120 units)
      - id: RMCBoxPillCanister
      - id: RMCDropper
      - id: CMSyringe


- type: entity
  parent: ColMarTechBaseAnchorable
  id: ColMarTechMarineMedical
  name: ColMarTech MarineMed
  description: Medical Pharmaceutical dispenser with basic medical supplies for marines.
  components:
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.38,-0.5,0.35,0.5"
        mask:
        - MachineMask
        layer:
        - MachineLayer
        density: 200
  - type: Sprite
    sprite: _RMC14/Structures/Machines/VendingMachines/ColMarTech/marine_medical.rsi
    layers:
    - state: "off"
      map: [ "enum.VendingMachineVisualLayers.Base" ]
    - state: "normal"
      map: [ "enum.VendingMachineVisualLayers.BaseUnshaded" ]
  - type: CMSolutionRefiller
    current: 600
    max: 600
    recharge: 125 # TODO RMC14 auto-restock items as well if round is >= 20 minutes in
    rechargeCooldown: 4
    reagents:
    - CMTricordrazine
#    - CMTramadol # TODO RMC14
    whitelist:
      components:
      - Hypospray
  - type: CMAutomatedVendor
    sections:
    - name: Autoinjectors
      entries:
      - id: CMTricordrazineAutoInjectorNoSkill
    #- id: CMPainStopAutoinjector
    - name: Devices
      entries:
      - id: CMHealthAnalyzer
    - name: Field Supplies
      entries:
      - id: CMFireExtinguisherPortable
      - id: CMOintment10
      - id: CMGauze10
#      - id: CMMedicalSplints5
#        amount: 7

- type: entity
  parent: ColMarTechBaseAnchorable
  id: RMCNanoMed
  name: NanoMed
  description: A wall-mounted medical equipment dispenser.
  components:
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.38,-0.5,0.35,0.5"
        mask:
        - MachineMask
        layer:
        - MachineLayer
        density: 200
        hard: false
  - type: Sprite
    drawdepth: WallMountedItems
    sprite: _RMC14/Structures/Machines/VendingMachines/nanomed.rsi
    layers:
    - state: "off"
    - state: "normal-unshaded"
  - type: CMSolutionRefiller
    current: 250
    max: 250
    recharge: 125 # TODO RMC14 auto-restock items as well if round is >= 20 minutes in
    rechargeCooldown: 4
    reagents:
    - CMTricordrazine
#    - CMTramadol # TODO RMC14
    whitelist:
      components:
      - Hypospray
  - type: CMAutomatedVendor
    hackable: true
    sections:
    - name: Supplies
      entries:
      # - id: CMPainStopAutoinjector
      #   amount: 2
      - id: CMTricordrazineAutoInjectorNoSkill
      - id: CMGauze10
      - id: CMOintment10
      # - id: CMMedicalSplints5
      #   amount: 4
    - name: Utility
      entries:
      - id: CMHealthAnalyzer

- type: entity
  parent: ColMarTechBaseAnchorable
  id: CMVendorBlood
  name: MM Blood Dispenser
  description: The Marine Med Brand Blood Pack Dispensary is the premier, top-of-the-line blood dispenser of 2105! Get yours today! #dont update year, that`s a joke from cm13
  components:
  - type: Sprite
    sprite: _RMC14/Structures/Machines/VendingMachines/blood.rsi
    snapCardinals: true
    layers:
    - state: "off"
      map: ["enum.VendingMachineVisualLayers.Base"]
    - state: "normal-unshaded"
      map: [ "enum.VendingMachineVisualLayers.BaseUnshaded" ]
      shader: unshaded
    - state: "panel"
      visible: false
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: ApcPowerReceiver
    needsPower: false # TODO RMC14
    powerLoad: 0
  - type: AccessReader
    access:
    - [ "CMAccessMedical" ]
  - type: CMAutomatedVendor
    hackable: true
    sections:
    - name: Blood Packs
      entries:
      - id: CMBloodPackFull
    - name: Miscellaneous
      entries:
      - id: CMBloodPack
        name: empty blood pack
